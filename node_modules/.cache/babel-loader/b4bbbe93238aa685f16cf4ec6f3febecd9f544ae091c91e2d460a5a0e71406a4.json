{"ast":null,"code":"import { Form, Field, ErrorMessage } from \"vee-validate\";\nimport axios from \"axios\";\nexport default {\n  components: {\n    Form,\n    Field,\n    ErrorMessage\n  },\n  data() {\n    return {\n      anexo: null\n    };\n  },\n  methods: {\n    async onSubmit() {\n      const datas = {\n        nome_queixoso: this.nome,\n        morada_queixoso: this.morada,\n        telefone_queixoso: this.telefone,\n        email_queixoso: this.email,\n        entidade_queixa: this.entidade,\n        morada_queixa: this.moradaEntidade,\n        telefone_queixa: this.telefoneEntidade,\n        email_queixa: this.emailEntidade,\n        assunto_queixa: this.assunto,\n        descricao_queixa: this.descricao,\n        anexo_queixa: this.anexo\n      };\n\n      //SUBMIT FORM WITH AXIOS\n      try {\n        await axios.post(\"http://127.0.0.1:8000/api/queixa/create\", datas, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data; charset=utf-8\"\n          }\n        });\n        this.showModal = !this.showModal;\n      } catch (error) {\n        this.ErrorModal = !this.ErrorModal;\n      }\n    },\n    closeError(event) {\n      this.ErrorModal = !this.ErrorModal;\n      event.preventDefault();\n      window.location.reload();\n    },\n    closeSuccess(event) {\n      this.showModal = !this.showModal;\n      event.preventDefault();\n      window.location.reload();\n    },\n    validateText(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      return true;\n    },\n    validateNumber(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      // if the field is not a valid number\n      const regex = /[0-9]/;\n      if (!regex.test(value)) {\n        return \"Carater inválido, precisa ser um número!\";\n      }\n      return true;\n    },\n    validateEmail(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      // if the field is not a valid email\n      const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n      if (!regex.test(value)) {\n        return \"Email inválido, precisa ser nesse formato: cnpd@example.cv\";\n      }\n      // All is good\n      return true;\n    }\n  }\n};","map":{"version":3,"mappings":"AA6OA,SAASA,IAAI,EAAEC,KAAK,EAAEC,YAAW,QAAS,cAAc;AACxD,OAAOC,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,UAAU,EAAE;IACVJ,IAAI;IACJC,KAAK;IACLC;EACF,CAAC;EACDG,IAAI,GAAG;IACL,OAAO;MACLC,KAAK,EAAC;IACR;EACF,CAAC;EAEDC,OAAO,EAAE;IACP,MAAMC,QAAQ,GAAG;MACf,MAAMC,KAAI,GAAI;QAEVC,aAAa,EAAE,IAAI,CAACC,IAAI;QACxBC,eAAe,EAAE,IAAI,CAACC,MAAM;QAC5BC,iBAAiB,EAAE,IAAI,CAACC,QAAQ;QAChCC,cAAc,EAAE,IAAI,CAACC,KAAK;QAC1BC,eAAe,EAAE,IAAI,CAACC,QAAQ;QAC9BC,aAAa,EAAE,IAAI,CAACC,cAAc;QAClCC,eAAe,EAAE,IAAI,CAACC,gBAAgB;QACtCC,YAAY,EAAE,IAAI,CAACC,aAAa;QAChCC,cAAc,EAAE,IAAI,CAACC,OAAO;QAC5BC,gBAAgB,EAAE,IAAI,CAACC,SAAS;QAChCC,YAAY,EAAE,IAAI,CAACxB;MACvB,CAAC;;MAEL;MACE,IAAI;QACH,MAAMH,KAAK,CAAC4B,IAAI,CAAC,yCAAyC,EAAEtB,KAAK,EAAE;UAChEuB,OAAO,EAAE;YAAE,cAAc,EAAE;UAAqC;QAClE,CAAC,CAAC;QACF,IAAI,CAACC,SAAQ,GAAI,CAAC,IAAI,CAACA,SAAS;MAElC,CAAC,QAAMC,KAAK,EAAC;QACP,IAAI,CAACC,UAAS,GAAI,CAAC,IAAI,CAACA,UAAS;MACrC;IAEF,CAAC;IAEDC,UAAU,CAACC,KAAK,EAAE;MAChB,IAAI,CAACF,UAAS,GAAI,CAAC,IAAI,CAACA,UAAU;MACnCE,KAAK,CAACC,cAAc,EAAE;MACrBC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IAC1B,CAAC;IACDC,YAAY,CAACL,KAAK,EAAE;MAClB,IAAI,CAACJ,SAAQ,GAAI,CAAC,IAAI,CAACA,SAAS;MAClCI,KAAK,CAACC,cAAc,EAAE;MACtBC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IACxB,CAAC;IACDE,YAAY,CAACC,KAAK,EAAE;MAClB;MACA,IAAI,CAACA,KAAK,EAAE;QACV,OAAO,oBAAoB;MAC7B;MACA,OAAO,IAAI;IACb,CAAC;IAEDC,cAAc,CAACD,KAAK,EAAE;MACpB;MACA,IAAI,CAACA,KAAK,EAAE;QACV,OAAO,oBAAoB;MAC7B;MACA;MACA,MAAME,KAAI,GAAI,OAAO;MACrB,IAAI,CAACA,KAAK,CAACC,IAAI,CAACH,KAAK,CAAC,EAAE;QACtB,OAAO,0CAA0C;MACnD;MAEA,OAAO,IAAI;IACb,CAAC;IACDI,aAAa,CAACJ,KAAK,EAAE;MACnB;MACA,IAAI,CAACA,KAAK,EAAE;QACV,OAAO,oBAAoB;MAC7B;MACA;MACA,MAAME,KAAI,GAAI,2CAA2C;MACzD,IAAI,CAACA,KAAK,CAACC,IAAI,CAACH,KAAK,CAAC,EAAE;QACtB,OAAO,4DAA4D;MACrE;MACA;MACA,OAAO,IAAI;IACb;EACF;AAEF,CAAC","names":["Form","Field","ErrorMessage","axios","components","data","anexo","methods","onSubmit","datas","nome_queixoso","nome","morada_queixoso","morada","telefone_queixoso","telefone","email_queixoso","email","entidade_queixa","entidade","morada_queixa","moradaEntidade","telefone_queixa","telefoneEntidade","email_queixa","emailEntidade","assunto_queixa","assunto","descricao_queixa","descricao","anexo_queixa","post","headers","showModal","error","ErrorModal","closeError","event","preventDefault","window","location","reload","closeSuccess","validateText","value","validateNumber","regex","test","validateEmail"],"sourceRoot":"","sources":["/Users/jailsoncorreia/CNPDSYSTEM/SITECNPDFINAL/src/components/QueixaCnpd.vue"],"sourcesContent":["<template>\n  <!-- ======= queixa Section ======= -->\n  <section id=\"queixa\" class=\"queixa\">\n    <div class=\"container\">\n      <div class=\"section-title\">\n        <h2>FORMULÁRIO DE APRESENTAÇÃO DE QUEIXAS/RECLAMAÇÕES</h2>\n      </div>\n      <div class=\"col-md-12\"  id=\"divg\">\n        <Form @submit=\"onSubmit\">  \n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <p class=\"pleft\"> Dados do queixoso:</p>\n               \n              <div class=\"col-md-12\" id=\"divloco\"> \n               <Field\n                  :rules=\"validateText\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"nome\"\n                  v-model=\"nome\"\n                  placeholder=\"Seu Nome\"\n                 />\n                <ErrorMessage class=\"errorMessage\" name=\"nome\" /> \n              </div>\n              <div class=\"col-md-12\" id=\"divloco\">\n              <Field\n                  :rules=\"validateText\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"morada\"\n                  v-model=\"morada\"\n                  placeholder=\"Sua morada ...\"\n                 />\n                <ErrorMessage class=\"errorMessage\" name=\"morada\" /> \n              </div>\n              <div class=\"col-md-12\" id=\"divloco\"> \n               <Field\n                  :rules=\"validateNumber\"\n                  type=\"number\"\n                  class=\"form-control\"\n                  name=\"telefone\"\n                  v-model=\"telefone\"\n                  placeholder=\"Nº de telefone Ex: 5900000\"\n                 />\n                <ErrorMessage class=\"errorMessage\" name=\"telefone\" /> \n              </div>\n              <div class=\"col-md-12\"  id=\"divloco\"> \n                <Field\n                  :rules=\"validateEmail\"\n                  type=\"email\"\n                  class=\"form-control\"\n                  name=\"email\"\n                  id=\"email\"\n                  placeholder=\"Entre seu email Ex: cnpd@cnpd.cv\"\n                  />\n                <ErrorMessage class=\"errorMessage\" name=\"email\" /> \n              </div>\n            </div>\n\n            <div class=\"col-lg-6\" id=\"divloco\">\n              <p class=\"pleft\"> Dados do denunciado:</p>\n              <div class=\"col-md-12\"> \n              <Field\n                  :rules=\"validateText\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"entidade\"\n                  v-model=\"entidade\"\n                  placeholder=\"Queixa contra a Pessoa/Empresa/Entidade ... Ex: Empresa XPTO\"\n                     />\n                <ErrorMessage class=\"errorMessage\" name=\"entidade\" /> \n              </div>\n              <div class=\"col-md-12\" id=\"divloco\">\n                <Field\n                  :rules=\"validateText\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"moradaEntidade\"\n                  v-model=\"moradaEntidade\"\n                  placeholder=\"Morada da Pessoa/Empresa/Entidade... Ex: Palmarejo\"\n                    />\n                <ErrorMessage class=\"errorMessage\" name=\"moradaEntidade\" /> \n              </div>\n              <div class=\"col-md-12\" id=\"divloco\"> \n                <Field\n                  :rules=\"validateNumber\"\n                  type=\"number\"\n                  class=\"form-control\"\n                  name=\"telefoneEntidade\"\n                  v-model=\"telefoneEntidade\"\n                  placeholder=\"Nº de telefone da Pessoa/Empresa/Entidade... Ex: 5900000\"\n                /> \n              </div>\n              <div class=\"col-md-12\" id=\"divloco\">\n                <Field\n                  :rules=\"validateEmail\"\n                  type=\"email\"\n                  class=\"form-control\"\n                  name=\"emailEntidade\"\n                  v-model=\"emailEntidade\"\n                  placeholder=\"Entre o email da Pessoa/Empresa/Entidade...  Ex: xpto@xpto.cv\"\n                  /> \n              </div>\n            </div>\n            \n            <p class=\"pleft\"> Obejeto da sua queixa:</p>\n            <div class=\"col-md-12\" id=\"divloco\"> \n              <Field\n                :rules=\"validateText\"\n                type=\"text\"\n                class=\"form-control\"\n                name=\"assunto\"\n                v-model=\"assunto\"\n                placeholder=\"Qual o assunto da sua queixa\"\n              />\n              <ErrorMessage class=\"errorMessage\" name=\"assunto\" /> \n            </div>\n            <div class=\"col-md-12\" id=\"divloco\"> \n              <Field\n                :rules=\"validateText\"\n                type=\"text\"\n                as=\"textarea\"\n                class=\"form-control\"\n                name=\"descricao\"\n                v-model=\"descricao\" \n                placeholder=\"Descreva a sua queixa em detalhes ...\"\n              />\n              <ErrorMessage class=\"errorMessage\" name=\"descricao\" /> \n              <div><br></div>\n\n              <div class=\"col-md-12\" id=\"divg\">\n          <div class=\"container\"> \n              <div class=\"col\">\n                <label class=\"form-check-label\">\n                  Pretende anexar algum documento ou fotografias?\n                </label>\n                <buttom\n                  @click=\"changeRepTrab\"\n                  type=\"button\"\n                  class=\"btn btn-outline-primary\"\n                  name=\"morada\"\n                  id=\"moradasimbotton\"\n                >\n                  {{ checkRepTrab ? \"Não\" : \"Sim\" }}\n                </buttom>\n              </div>\n              <div class=\"col-md-12\"><br /></div>\n              <div class=\"col-md-12\" v-if=\"checkRepTrab\"> \n                \n              <Field\n                  v-model=\"anexo\"\n                  name=\"anexo\"\n                  class=\"form-control\"\n                  type=\"file\"\n                  :rules=\"validateText\" \n                  accept=\"application/pdf\" \n                /> \n                <!--accept=\"image/png, image/gif, image/jpeg\"-->   \n                <ErrorMessage class=\"errorMessage\" name=\"anexo\" />\n              </div> \n          </div>\n        </div>\n      </div>\n\n            <span style=\"color: #BC9913\">Se tiver mais do que um anexo por favor entre em contato por email.</span>\n          </div>\n          <br>\n          <div class=\"col-md-12\" id=\"divsave\">\n          <button\n            @click=\"submitForm\"\n            id=\"buttonsave\"\n            class=\"btn btn-primary\"\n            type=\"submit\"\n          >\n          <IconAwe class=\"icon-color\" icon=\"paper-plane\"\n                    /> Submeter Queixa\n          </button>\n        </div> \n         <!------------------MODAL SHOW ------------------------->\n         <div v-show=\"showModal\" class=\"modal-mask\">\n              <div class=\"modal-wrapper\">\n                <div class=\"modal-container\">\n                  <h5 class=\"modal-title\" >\n                  Atenção:\n                  </h5>\n                  <hr> \n                  <div class=\"modal-header\" id=\"headermodal\">\n                     <img id=\"img\" src=\"/img/success1.gif\" class=\"center\">\n                  </div>\n                  <p id=\"success\">O seu formulário foi submetido com Sucesso.</p>   \n                  <div class=\"modalFooter\">\n                  <button\n                        @click=\"closeSuccess\"\n                        id=\"buttonsave\"\n                        class=\"btn btn-primary\"\n                      >\n                        <IconAwe class=\"icon-color\" icon=\"circle-check\" /> Fechar\n                    </button>\n                  </div>\n                </div>\n              </div>\n              \n            </div>\n            <div v-show=\"ErrorModal\" class=\"modal-mask\">\n              <div class=\"modal-wrapper\">\n                <div class=\"modal-container\">\n                  <h5 class=\"modal-title\" >\n                  Atenção:\n                  </h5>\n                  <hr> \n                  <div class=\"modal-header\" id=\"headermodal\">\n                     <img id=\"img\" src=\"/img/error-img.gif\" class=\"center\">\n                  </div>\n                  <p id=\"error\">O seu formulário não foi submetido.</p>\n                  <p id=\"error1\">Por favor tente novamente!</p>     \n                  <div class=\"modalFooter\">\n                    <button\n                        @click=\"closeError\"\n                        id=\"buttonsave\"\n                        class=\"btn btn-primary\"\n                      >\n                        <IconAwe class=\"icon-color\" icon=\"circle-check\" /> Fechar\n                    </button>\n                  </div>\n                </div>\n              </div>\n              \n            </div>\n            <!------------------FIM DE MODAL SHOW------------------------->\n        </Form>\n      </div>\n    </div>\n  </section>\n  <!-- End queixa Section -->\n</template>\n\n<script> \nimport { Form, Field, ErrorMessage } from \"vee-validate\";\nimport axios from \"axios\";\nexport default { \n  components: {\n    Form,\n    Field,\n    ErrorMessage, \n  }, \n  data() {\n    return {\n      anexo:null\n    }\n  },\n\n  methods: {\n    async onSubmit() {\n      const datas = {\n\n          nome_queixoso: this.nome,\n          morada_queixoso: this.morada,\n          telefone_queixoso: this.telefone,\n          email_queixoso: this.email,\n          entidade_queixa: this.entidade,\n          morada_queixa: this.moradaEntidade,\n          telefone_queixa: this.telefoneEntidade,\n          email_queixa: this.emailEntidade,\n          assunto_queixa: this.assunto,\n          descricao_queixa: this.descricao,\n          anexo_queixa: this.anexo,  \n      };\n       \n  //SUBMIT FORM WITH AXIOS\n    try { \n     await axios.post(\"http://127.0.0.1:8000/api/queixa/create\", datas, {\n        headers: { \"Content-Type\": \"multipart/form-data; charset=utf-8\" },\n      }); \n      this.showModal = !this.showModal;   \n\n    }catch(error){\n          this.ErrorModal = !this.ErrorModal ;   \n      } \n        \n    },\n    \n    closeError(event) {\n      this.ErrorModal = !this.ErrorModal; \n     event.preventDefault();\n      window.location.reload();\n    },\n    closeSuccess(event) {\n      this.showModal = !this.showModal;  \n    event.preventDefault();\n    window.location.reload();\n    },\n    validateText(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      return true;\n    },\n \n    validateNumber(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      // if the field is not a valid number\n      const regex = /[0-9]/;\n      if (!regex.test(value)) {\n        return \"Carater inválido, precisa ser um número!\";\n      }\n\n      return true;\n    },\n    validateEmail(value) {\n      // if the field is empty\n      if (!value) {\n        return \"Campo obrigatório!\";\n      }\n      // if the field is not a valid email\n      const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n      if (!regex.test(value)) {\n        return \"Email inválido, precisa ser nesse formato: cnpd@example.cv\";\n      }\n      // All is good\n      return true;\n    }\n  }\n  \n};\n</script>\n\n<style scoped>\n/*--------------------------------------------------------------\n# queixa\n--------------------------------------------------------------*/\n#divg {\n  font-family: \"Times New Roman\", Times, serif;\n  padding: 10px;/*\n  border: 1px solid #061536;\n  border-radius: 10px;*/\n}\n#buttonsave {\n  background-color: #061536;\n}\n#divsave {\n  margin-top: 10px;\n  text-align: center;\n}\nbutton#buttonsave:hover,\nbutton#buttonsave:focus {\n  background-color: #061536;\n  outline: none !important;\n  border-color: #061536;\n  color: #bd9a13;\n  box-shadow: 0 0 10px #061536;\n}\n#divloco {\n  margin-top: 10px;\n}\n.pleft{\n    text-align: left;  \n    font-weight: bold\n}\n#queixa {\n  padding-top: 60px;\n}\n#framemaps {\n  border-radius: 1%;\n  width: 100%;\n  height: 400px;\n}\n.section-title {\n  text-align: center;\n  padding-bottom: 30px;\n}\n.section-title h2 {\n  font-size: 13px;\n  letter-spacing: 1px;\n  font-weight: 700;\n  padding: 8px 20px;\n  line-height: 1;\n  margin: 0;\n  background: #bd9a13;\n  color: #000;\n  display: inline-block;\n  text-transform: uppercase;\n  border-radius: 50px;\n}\n.section-title h3 {\n  margin: 15px 0 0 0;\n  font-size: 32px;\n  font-weight: 700;\n}\n.section-title h3 span {\n  color: #000;\n}\n.section-title p {\n  margin: 15px auto 0 auto;\n  font-weight: 600;\n}\n@media (min-width: 1024px) {\n  .section-title p {\n    width: 50%;\n  }\n}\n.queixa .info {\n  width: 100%;\n  background: #fff;\n}\n.queixa .info i {\n  font-size: 20px;\n  color: #030b1c;\n  float: left;\n  width: 32px;\n  height: 32px;\n  background: #bd9a13;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50px;\n  transition: all 0.3s ease-in-out;\n}\n.queixa .info h4 {\n  padding: 0 0 0 60px;\n  font-size: 22px;\n  font-weight: 600;\n  margin-bottom: 5px;\n  color: #493c3e;\n}\n.queixa .info p {\n  padding: 0 0 0 60px;\n  margin-bottom: 0;\n  font-size: 14px;\n  color: #000;\n}\n.queixa .info .email,\n.queixa .info .phone {\n  margin-top: 40px;\n}\n.queixa .info .email:hover i,\n.queixa .info .address:hover i,\n.queixa .info .phone:hover i {\n  color: #fff;\n}\n.queixa .php-email-form {\n  width: 100%;\n  background: #fff;\n}\n.queixa .php-email-form .form-group {\n  padding-bottom: 8px;\n}\n.queixa .php-email-form .error-message {\n  display: none;\n  color: #fff;\n  background: #ed3c0d;\n  text-align: left;\n  padding: 15px;\n  font-weight: 600;\n}\n.queixa .php-email-form .error-message br + br {\n  margin-top: 25px;\n}\n.queixa .php-email-form .sent-message {\n  display: none;\n  color: #fff;\n  background: #18d26e;\n  text-align: center;\n  padding: 15px;\n  font-weight: 600;\n}\n.queixa .php-email-form .loading {\n  display: none;\n  background: #fff;\n  text-align: center;\n  padding: 15px;\n}\n.queixa .php-email-form .loading:before {\n  content: \"\";\n  display: inline-block;\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  margin: 0 10px -6px 0;\n  border: 3px solid #18d26e;\n  border-top-color: #eee;\n  -webkit-animation: animate-loading 1s linear infinite;\n  animation: animate-loading 1s linear infinite;\n}\n.queixa .php-email-form input,\n.queixa .php-email-form textarea {\n  border-radius: 0;\n  box-shadow: none;\n  font-size: 14px;\n}\n.queixa .php-email-form input:focus,\n.queixa .php-email-form textarea:focus {\n  border-color: #030b1c;\n}\n.queixa .php-email-form input {\n  height: 44px;\n}\n.queixa .php-email-form textarea {\n  padding: 10px 12px;\n}\n.queixa .php-email-form button[type=\"submit\"] {\n  background: #bd9a13;\n  border: 0;\n  padding: 10px 28px;\n  color: #000;\n  font-weight: bold;\n  transition: 0.4s;\n  border-radius: 50px;\n}\n.queixa .php-email-form button[type=\"submit\"]:hover {\n  background: #bd9a13;\n}\n@-webkit-keyframes animate-loading {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@keyframes animate-loading {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.icon-color {\n  font-size: 14px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}